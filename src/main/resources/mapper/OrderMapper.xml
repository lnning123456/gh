<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ln.dao.OrderDao">
    <sql id="order">
        select  order_id orderId,username_id usernameId,
        work_id workId,status,create_time createTime
        from order

    </sql>
    <insert id="addOrder">
    insert into  order values (#{orderId},#{usernameId},#{workId},#{status},#{createTime})
</insert>
    <delete id="deleteOrder">
    delete  from order where order_id in
        <foreach collection="array" open="(" separator="," close=")" item="id">
            #{id}
        </foreach>
</delete>
    <update id="updateOrder">
        update order  set status=#{status} where order_id=#{orderId}
    </update>
    <select id=" queryOrderByUsername" resultType="Order">
        <include refid="order"></include>
        <where>
            <if test="order.usernameId!=null">
                username_id=#{username}
            </if>
            <if test="order.status!=null">
              and  status=#{status}
            </if>
           
        </where>
        limit #{start},5
    </select>
    <select id="getUserCount" resultType="Integer">
        select count(order_id) from order
        <where>
            <if test="order.usernameId!=null">
                username_id=#{usernameId}
            </if>
            <if test="order.status!=null">
                and  status=#{status}
            </if>
            <if test="order.usernameId!=null">
                username_id=#{username}
            </if>
        </where>
    </select>
    <select id="queryOrderByWorkId" resultType="Order">
        <include refid="order"></include>
      where  work_id=#{work}
    </select>
</mapper>